<div id="income-results" hx-indicator="this">
    <div class="skeleton-loader">
        <div class="data-list">
            {% for i in "12345" %}
                <div class="data-list-item" style="cursor: default; pointer-events: none;">
                    <div class="list-item-info">
                        <div class="skeleton-text" style="width: 80px; height: 12px; margin-bottom: 4px;"></div>
                        <div class="skeleton-text" style="width: 150px; height: 16px; margin-bottom: 4px;"></div>
                        <div class="skeleton-text" style="width: 250px; height: 14px;"></div>
                    </div>
                    <div class="list-item-stats">
                        <div class="skeleton-text" style="width: 90px; height: 20px;"></div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="hide-on-loading">
        <!-- Income List -->
        {% if transactions %}
            <h2 class="mb-3"> Entrate</h2>

            <div class="data-list" id="scroll-target">
                {% for transaction in transactions %}
                    <div class="data-list-item">
                        <div class="list-item-info">
                            <div class="transaction-date">
                                 {{ transaction.transaction_date|date:"d/m/Y" }}
                            </div>
                        <div class="transaction-merchant">
                                {{ transaction.operation_type }}
                            </div>
                            {% if transaction.description %}
                                <div class="transaction-description" title="{{ transaction.description }}">
                                    {{ transaction.description|truncatewords:15 }}
                                </div>
                            {% endif %}
                        </div>

                        <div class="list-item-stats">
                            <div class="list-amount is-income">
                                €{{ transaction.amount|floatformat:2 }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <!-- Pagination -->
            {% if is_paginated %}
                <div class="pagination">
                    {% if page_obj.has_previous %}
                        <a href="?page=1{% if search_query %}&search={{ search_query }}{% endif %}{% for month in selected_months %}&months={{ month }}{% endfor %}{% if year %}&year={{ year }}{% endif %}{% if selected_amount %}&amount={{ selected_amount }}&amount_operator={{ selected_amount_operator }}{% endif %}"
                           hx-get="?page=1{% if search_query %}&search={{ search_query }}{% endif %}{% for month in selected_months %}&months={{ month }}{% endfor %}{% if year %}&year={{ year }}{% endif %}{% if selected_amount %}&amount={{ selected_amount }}&amount_operator={{ selected_amount_operator }}{% endif %}"
                           hx-target="#income-results"
                           hx-swap="outerHTML"
                           hx-indicator="#income-results">« Prima</a>
                        <a href="?page={{ page_obj.previous_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}{% for month in selected_months %}&months={{ month }}{% endfor %}{% if year %}&year={{ year }}{% endif %}{% if selected_amount %}&amount={{ selected_amount }}&amount_operator={{ selected_amount_operator }}{% endif %}"
                           hx-get="?page={{ page_obj.previous_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}{% for month in selected_months %}&months={{ month }}{% endfor %}{% if year %}&year={{ year }}{% endif %}{% if selected_amount %}&amount={{ selected_amount }}&amount_operator={{ selected_amount_operator }}{% endif %}"
                           hx-target="#income-results"
                           hx-swap="outerHTML"
                           hx-indicator="#income-results">‹ Precedente</a>
                    {% else %}
                        <span class="disabled">« Prima</span>
                        <span class="disabled">‹ Precedente</span>
                    {% endif %}

                    <span class="current">
                        Pagina {{ page_obj.number }} di {{ page_obj.paginator.num_pages }}
                    </span>

                    {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}{% for month in selected_months %}&months={{ month }}{% endfor %}{% if year %}&year={{ year }}{% endif %}{% if selected_amount %}&amount={{ selected_amount }}&amount_operator={{ selected_amount_operator }}{% endif %}"
                           hx-get="?page={{ page_obj.next_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}{% for month in selected_months %}&months={{ month }}{% endfor %}{% if year %}&year={{ year }}{% endif %}{% if selected_amount %}&amount={{ selected_amount }}&amount_operator={{ selected_amount_operator }}{% endif %}"
                           hx-target="#income-results"
                           hx-swap="outerHTML"
                           hx-indicator="#income-results">Successiva ›</a>
                        <a href="?page={{ page_obj.paginator.num_pages }}{% if search_query %}&search={{ search_query }}{% endif %}{% for month in selected_months %}&months={{ month }}{% endfor %}{% if year %}&year={{ year }}{% endif %}{% if selected_amount %}&amount={{ selected_amount }}&amount_operator={{ selected_amount_operator }}{% endif %}"
                           hx-get="?page={{ page_obj.paginator.num_pages }}{% if search_query %}&search={{ search_query }}{% endif %}{% for month in selected_months %}&months={{ month }}{% endfor %}{% if year %}&year={{ year }}{% endif %}{% if selected_amount %}&amount={{ selected_amount }}&amount_operator={{ selected_amount_operator }}{% endif %}"
                           hx-target="#income-results"
                           hx-swap="outerHTML"
                           hx-indicator="#income-results">Ultima »</a>
                    {% else %}
                        <span class="disabled">Successiva ›</span>
                        <span class="disabled">Ultima »</span>
                    {% endif %}
                </div>
            {% endif %}

        {% else %}
            <p class="text-muted" style="margin-top: 16px;">Nessuna entrata trovata.</p>
        {% endif %}
    </div>
</div>
