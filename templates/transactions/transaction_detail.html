{% extends "main/index.html" %}
{% load static %}

{% block title %}Modifica Spesa{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/transactions.css' %}">
    <link rel="stylesheet" href="{% static 'css/transaction-detail.css' %}">
    <link rel="stylesheet" href="{% static 'css/transaction-form.css' %}">
{% endblock %}

{% block content %}
    <div class="container mt-2">
        <div class="header">
            <div class="header-title-container">
                <h1><span class="material-icons transaction-detail-header-icon">edit</span> Modifica Spesa</h1>
            </div>
            <div class="header-actions">
                <button type="submit" form="transaction-form" class="btn btn-primary desktop-only">
                    <span class="material-icons transaction-detail-save-icon">save</span> Salva
                </button>
                <form method="post" action="{% url 'transaction_detail' transaction.id %}" onsubmit="return confirm('Sei sicuro di voler eliminare questa transazione? Questa azione non Ã¨ reversibile.')">
                    {% csrf_token %}
                    <button type="submit" name="delete" class="btn btn-icon btn-subtle-danger btn-expand-desktop" title="Elimina">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 6h18"></path>
                            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                        <span class="desktop-only">Elimina</span>
                    </button>
                </form>
            </div>
        </div>

        <div class="mt-4">
            <div class="detail-card">
                <div class="detail-body">
                    {% include "transactions/components/transaction_form.html" with is_update=True %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/transactions.js' %}"></script>
{% endblock %}