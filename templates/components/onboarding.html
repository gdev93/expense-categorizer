{% if user.is_authenticated %}
    {% if user.profile.onboarding_step < 5 %}
    <div id="onboarding-modal-container" class="onboarding-modal-overlay">
        <div id="onboarding-modal" class="onboarding-modal-card">
            <div id="onboarding-modal-body" 
                 hx-get="{% url 'onboarding_step' %}" 
                 hx-trigger="load"
                 hx-swap="innerHTML transition:true">
                <div class="onboarding-loading">
                    <div class="spinner"></div>
                    <p>Caricamento...</p>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Replay Onboarding Modal -->
    <div id="replay-modal" class="app-modal" style="display: none;">
        <div class="app-modal-content">
            <div class="app-modal-header">
                <h3>Ripeti Tutorial</h3>
            </div>
            <div class="app-modal-body">
                Vuoi ricominciare il tour guidato? Ti accompagneremo passo dopo passo nella configurazione della tua app.
            </div>
            <div class="app-modal-footer">
                <button class="btn btn-secondary" id="replay-cancel">Annulla</button>
                <button class="btn btn-primary" id="replay-confirm">SÃ¬, ripeti</button>
            </div>
        </div>
    </div>
{% endif %}
